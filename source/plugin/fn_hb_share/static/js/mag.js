!function(){function n(n){if(!window.MagAndroidClient){if(window.WebViewJavascriptBridge)return n(WebViewJavascriptBridge);if(document.addEventListener("WebViewJavascriptBridgeReady",function(i){n(WebViewJavascriptBridge)},!1),window.WVJBCallbacks)return window.WVJBCallbacks.push(n);window.WVJBCallbacks=[n];var i=document.createElement("iframe");i.style.display="none",i.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(i),setTimeout(function(){document.documentElement.removeChild(i)},0)}}n(function(n){n.init&&"function"==typeof n.init&&n.init(function(n,i){}),n.registerHandler("jsCallBack",function(n,i){var o=JSON.parse(n),a=o.id,e=o.val,c=mag.callbacks[a];c&&(c.type&&"json"==c.type&&e&&(e=JSON.parse(e)),c.success(e))})}),mag={VERSION:"1.0",ready:function(i){n(function(){i()}),window.MagAndroidClient&&i()},callbacks:{},iosConnect:n,jsCallBack:function(n,i){var o=mag.callbacks[n];o&&(o.type&&"json"==o.type&&i&&(i=JSON.parse(i)),o.success(i))},getLocation:function(i){i&&(mag.callbacks.getLocation={type:"json",success:i},window.MagAndroidClient&&window.MagAndroidClient.getLocation(),n(function(n){n.callHandler("getLocation","",function(n){})}))},mapPick:function(i){i&&(mag.callbacks.mapPick={type:"json",success:i},window.MagAndroidClient&&window.MagAndroidClient.mapPick(),n(function(n){n.callHandler("mapPick","",function(){})}))},closeWin:function(){window.MagAndroidClient&&window.MagAndroidClient.closeWin(),n(function(n){n.callHandler("closeWin","",function(n){})})},previewImage:function(i){var o=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.previewImage(o),n(function(n){n.callHandler("previewImage",o,function(n){})})},picPick:function(i){mag.callbacks.picPickPreview={type:"json",success:i.preview},mag.callbacks.picPickSuccess={type:"json",success:i.success},mag.callbacks.picPickFail={type:"json",success:i.fail};var o=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.picPick(o),n(function(n){n.callHandler("picPick",o,function(n){})})},camera:function(i){mag.callbacks.cameraPreview={type:"json",success:i.preview},mag.callbacks.cameraSuccess={type:"json",success:i.success},mag.callbacks.cameraFail={type:"json",success:i.fail};var o=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.camera(o),n(function(n){n.callHandler("camera",o,function(n){})})},setData:function(i){var o=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.setData(o),n(function(n){n.callHandler("setData",o,function(n){})})},share:function(i,o){mag.callbacks.shareSuccess={type:"",success:o},window.MagAndroidClient&&window.MagAndroidClient.share(i),n(function(n){n.callHandler("share",i,function(n){})})},socialBind:function(i,o,a){mag.callbacks.bindOnSuccess={type:"json",success:o},mag.callbacks.bindOnFail={type:"json",success:a},window.MagAndroidClient&&window.MagAndroidClient.socialBind(i),n(function(n){n.callHandler("socialBind",i,function(n){})})},report:function(i){var o=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.report(o),n(function(n){n.callHandler("report",o,function(n){})})},scanQR:function(i){i&&(mag.callbacks.scanQR={type:"",success:i},window.MagAndroidClient&&window.MagAndroidClient.scanQR(),n(function(n){n.callHandler("scanQR","",function(n){})}))},actionSheet:function(i,o){if(o){var a=JSON.stringify(i);mag.callbacks.actionSheet={type:"json",success:o},window.MagAndroidClient&&window.MagAndroidClient.actionSheet(a),n(function(n){n.callHandler("actionSheet",a,function(n){})})}},toast:function(i){window.MagAndroidClient&&window.MagAndroidClient.toast(i),n(function(n){n.callHandler("toast",i,function(n){})})},dialog:function(i){var o=JSON.stringify(i);mag.callbacks.dialogSuccess={type:"json",success:i.success},mag.callbacks.dialogCancel={type:"json",success:i.cancel},window.MagAndroidClient&&window.MagAndroidClient.dialog(o),n(function(n){n.callHandler("dialog",o,function(n){})})},progress:function(){window.MagAndroidClient&&window.MagAndroidClient.progress(),n(function(n){n.callHandler("progress","",function(n){})})},hideProgress:function(){window.MagAndroidClient&&window.MagAndroidClient.hideProgress(),n(function(n){n.callHandler("hideProgress","",function(n){})})},setTitle:function(i){window.MagAndroidClient&&window.MagAndroidClient.setTitle(i),n(function(n){n.callHandler("setTitle",i,function(n){})})},showNavigation:function(){window.MagAndroidClient&&window.MagAndroidClient.showNavigation(),n(function(n){n.callHandler("showNavigation","",function(n){})})},hideNavigation:function(){window.MagAndroidClient&&window.MagAndroidClient.hideNavigation(),n(function(n){n.callHandler("hideNavigation","",function(n){})})},setNavigationColor:function(i){window.MagAndroidClient&&window.MagAndroidClient.setNavigationColor(i),n(function(n){n.callHandler("setNavigationColor",i,function(n){})})},hideMore:function(){window.MagAndroidClient&&window.MagAndroidClient.hideMore(),n(function(n){n.callHandler("hideMore","",function(n){})})},showMore:function(){window.MagAndroidClient&&window.MagAndroidClient.showMore(),n(function(n){n.callHandler("showMore","",function(n){})})},tel:function(i){window.MagAndroidClient&&window.MagAndroidClient.tel(i),n(function(n){n.callHandler("tel",i,function(n){})})},sms:function(i,o){var a=JSON.stringify({phone:i,content:o});window.MagAndroidClient&&window.MagAndroidClient.sms(a),n(function(n){n.callHandler("sms",a,function(n){})})},toLogin:function(i){mag.callbacks.loginSuccess={type:"json",success:i},window.MagAndroidClient&&window.MagAndroidClient.toLogin(),n(function(n){n.callHandler("toLogin","",function(n){})})},toUserHome:function(i){window.MagAndroidClient&&window.MagAndroidClient.toUserHome(i),n(function(n){n.callHandler("toUserHome",i,function(n){})})},toUserHomeByName:function(i){i&&(window.MagAndroidClient&&window.MagAndroidClient.toUserHomeByName(i),n(function(n){n.callHandler("toUserHomeByName",i,function(n){})}))},commentBar:function(i){var o=JSON.stringify(i);i.onComment&&(mag.callbacks.commentBar={type:"json",success:i.onComment}),i.onPageSelect&&(mag.callbacks.pageSelect={type:"json",success:i.onPageSelect}),i.onApplaud&&(mag.callbacks.applaud={type:"json",success:i.onApplaud}),window.MagAndroidClient&&window.MagAndroidClient.commentBar(o),n(function(n){n.callHandler("commentBar",o,function(n){})})},toComment:function(i){var o=JSON.stringify(i);i.success&&(mag.callbacks.comment={type:"json",success:i.success}),window.MagAndroidClient&&window.MagAndroidClient.toComment(o),n(function(n){n.callHandler("toComment",o,function(n){})})},newWin:function(i,o){i.indexOf("?")<0&&(i+="?");for(var a in o)i+="&"+a+"="+o[a];window.MagAndroidClient&&window.MagAndroidClient.newWin(i),n(function(n){n.callHandler("newWin",i,function(n){})})},setPageLife:function(n){mag.callbacks.pageAppear={type:"",success:n.pageAppear},mag.callbacks.pageDisappear={type:"",success:n.pageDisappear}},pay:function(i,o,a){mag.callbacks.payOnSuccess={type:"",success:o},mag.callbacks.payOnFail={type:"",success:a};var e=JSON.stringify(i);window.MagAndroidClient&&window.MagAndroidClient.pay(e),n(function(n){n.callHandler("pay",e,function(n){})})},alipay:function(i,o,a){if(!i)return!1;mag.callbacks.alipayOnSuccess={type:"",success:o},mag.callbacks.alipayOnFail={type:"",success:a},window.MagAndroidClient&&window.MagAndroidClient.alipay(i),n(function(n){n.callHandler("alipay",i,function(n){})})},phoneBind:function(i){mag.callbacks.phoneBindSuccess={type:"string",success:i},window.MagAndroidClient&&window.MagAndroidClient.phoneBind(),n(function(n){n.callHandler("phoneBind","",function(n){})})},qqConnectLogin:function(i){window.MagAndroidClient&&window.MagAndroidClient.qqConnectLogin(i),n(function(n){n.callHandler("qqConnectLogin",i,function(n){})})},bounceEnable:function(i){n(function(n){n.callHandler("bounceEnable",i,function(n){})})}},window.mag=mag,mag.VERSION="1.0"}();